#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç Running pre-push checks..."

# –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–∏
branch_name=$(git symbolic-ref --short HEAD)

# –ó–∞–ø—Ä–µ—â–∞–µ–º push –≤ main –±–µ–∑ PR
if [ "$branch_name" = "main" ]; then
  echo "‚ùå Direct push to main branch is not allowed!"
  echo "Please create a pull request."
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
echo "Running full test suite..."
npm run test:run

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–±–æ—Ä–∫—É
echo "Building project..."
npm run build

echo "‚úÖ Pre-push checks passed!"
